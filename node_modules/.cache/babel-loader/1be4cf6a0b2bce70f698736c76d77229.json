{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u0410\\u043D\\u0441\\u0430\\u0440/Documents/FBMD/Front-End/react/ansa-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{useParams}from'react-router-dom';import Pagination from'../main-comp/Pagination';import SerialCard from'./SerialCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SearchedMovie(){var _useParams=useParams(),q=_useParams.q;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchedserials=_useState2[0],setSearchedSerials=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalResults=_useState6[0],setTotalResults=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),numberPages=_useState10[0],setTotalPages=_useState10[1];var history=useHistory();useEffect(function(){if(q){fetch('https://api.themoviedb.org/3/search/tv?api_key=9122d3e99f5cf10f65b111a1dcd51b20&language=ru-RU&query='+q+'').then(function(res){return res.json();}).then(function(data){setSearchedSerials(data.results);setTotalResults(totalResults=data.total_results);setTotalPages(numberPages=data.total_pages);});}},[q]);function handleOnSubmit(){history.push('/searchserial/'+searchTerm);}var nextPage=function nextPage(pageNumber){if(q){fetch('https://api.themoviedb.org/3/search/tv?api_key=9122d3e99f5cf10f65b111a1dcd51b20&language=ru-RU&query='+q+'&page='+pageNumber+'').then(function(res){return res.json();}).then(function(data){setSearchedSerials(data.results);setCurrentPage(currentPage=pageNumber);});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-bar\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleOnSubmit,className:\"search-bar-form\",action:\"\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setSearchTerm(e.target.value);},placeholder:\"Search a Serial\",value:searchTerm,className:\"search-bar-input\",type:\"search\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"searched-movie-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u044B \\u0438\\u0441\\u043A\\u0430\\u043B\\u0438: \".concat(q)}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439 \\u043D\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435: \".concat(totalResults)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"searched-movies-list\",children:searchedserials.map(function(item){return/*#__PURE__*/_jsx(SerialCard,{data:item});})}),totalResults>20?/*#__PURE__*/_jsx(Pagination,{pages:numberPages,nextPage:nextPage,currentPage:currentPage}):'']});}export default SearchedMovie;","map":{"version":3,"sources":["C:/Users/Ансар/Documents/FBMD/Front-End/react/ansa-app/src/comp/serial-comp/SearchedSerial.jsx"],"names":["useState","useEffect","useHistory","useParams","Pagination","SerialCard","SearchedMovie","q","searchedserials","setSearchedSerials","searchTerm","setSearchTerm","totalResults","setTotalResults","currentPage","setCurrentPage","numberPages","setTotalPages","history","fetch","then","res","json","data","results","total_results","total_pages","handleOnSubmit","push","nextPage","pageNumber","e","target","value","map","item"],"mappings":"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","sourcesContent":["\r\nimport { useState, useEffect, } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useParams } from 'react-router-dom'\r\nimport Pagination from '../main-comp/Pagination'\r\n\r\nimport SerialCard from './SerialCard'\r\n\r\nfunction SearchedMovie() {\r\n    const { q } = useParams()\r\n\r\n    const [searchedserials, setSearchedSerials] = useState([])\r\n    const [searchTerm, setSearchTerm] = useState('')\r\n    let [totalResults, setTotalResults] = useState(0)\r\n    let [currentPage, setCurrentPage] = useState(1)\r\n    let [numberPages, setTotalPages] = useState(0)\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        if (q) {\r\n            fetch('https://api.themoviedb.org/3/search/tv?api_key=9122d3e99f5cf10f65b111a1dcd51b20&language=ru-RU&query=' + q + '')\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    setSearchedSerials(data.results)\r\n                    setTotalResults(totalResults = data.total_results)\r\n                    setTotalPages(numberPages = data.total_pages)\r\n                })\r\n        }\r\n    }, [q])\r\n\r\n\r\n    function handleOnSubmit() {\r\n        history.push('/searchserial/' + searchTerm)\r\n    }\r\n\r\n    let nextPage = (pageNumber) => {\r\n        if (q) {\r\n            fetch('https://api.themoviedb.org/3/search/tv?api_key=9122d3e99f5cf10f65b111a1dcd51b20&language=ru-RU&query=' + q + '&page=' + pageNumber + '')\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    setSearchedSerials(data.results)\r\n                    setCurrentPage(currentPage = pageNumber)\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"search-bar\">\r\n                <form onSubmit={handleOnSubmit} className=\"search-bar-form\" action=\"\">\r\n                    <input onChange={e => setSearchTerm(e.target.value)} placeholder=\"Search a Serial\" value={searchTerm} className=\"search-bar-input\" type=\"search\" />\r\n                </form>\r\n            </div>\r\n            <div className=\"searched-movie-info\">\r\n                <h1>{`Вы искали: ${q}`}</h1>\r\n                <p>{`Найдено записей на сайте: ${totalResults}`}</p>\r\n            </div>\r\n            <div className=\"searched-movies-list\">\r\n                {\r\n                    searchedserials.map(item => (\r\n                        <SerialCard data={item} />\r\n                    ))\r\n                }\r\n            </div>\r\n            {\r\n                totalResults > 20 ? <Pagination pages={numberPages} nextPage={nextPage} currentPage={currentPage} /> : ''\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SearchedMovie;"]},"metadata":{},"sourceType":"module"}